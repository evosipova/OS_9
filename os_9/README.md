# Осипова Елизавета Владимировна - БПИ219

## Домашнее задание №9

#### Задание: 
1. Реализовать для родительского и дочернего процесса двухстороннюю связь с использованием только одного неименованного канала (pipe) и циклической организацией обмена посредством семафора. При этом канал должен быть постоянно открытым. Обмен должен завершаться после поочередной передачи в каждую сторону по десять сообщений. По завершении обмена обеспечить корректное закрытие каналов и удаление семафора.
2. Опционально. Вместо десяти обменов организовать поочередный обмен, завершающийся посылкой сигнала прерывания с клавиатуры родительскому или дочернему процессу. При этом оба процесса должны корректно завершить работу с закрытием канала и удалением семафора.


### Реализация:
Реализация задания и комменатрии с пояснениями представлены в файле - [task.c](task.c)


Основные этапы работы программы:

1) Создание неименованного канала с использованием функции pipe(), которая возвращает два файловых дескриптора: один для записи (pipefd[1]) и один для чтения (pipefd[0]).
2) Создание семафора с использованием функции sem_open(), который используется для синхронизации между процессами. Счетчик семафора инициализируется значением 0.
3) Создание дочернего процесса с использованием функции fork(). Если создание процесса прошло успешно, то у нас будет два процесса: родительский и дочерний.
4) В дочернем процессе (обозначенном значением 0, в переменной child_pid), происходит чтение из конца канала для чтения (pipefd[0]), и вывод полученных сообщений на экран. Счетчик семафора увеличивается с помощью функции sem_post(), после чего дочерний процесс ожидает получения новых сообщений.
5) В родительском процессе (обозначенном значением не равным 0, в переменной child_pid), пользователю предлагается ввести сообщение для передачи в канал для записи (pipefd[1]). После записи сообщения, родительский процесс ожидает счетчика семафора с использованием функции sem_wait(), передавая семафор в качестве аргумента. Это позволяет родительскому процессу ожидать, пока дочерний процесс не прочитает сообщение, и затем передаст управление обратно родительскому процессу.
6) Процессы выполняют обмен сообщениями до тех пор, пока не будет достигнут лимит количества передаваемых сообщений (MESSAGE_LIMIT).
7) После достижения лимита, родительский процесс ожидает завершения дочернего процесса с использованием функции waitpid(), и выводит информацию о том, как завершился дочерний процесс (с кодом возврата или сигналом, с использованием функций WIFEXITED() и WIFSIGNALED()).
8) После завершения дочернего процесса, семафор удаляется с использованием функции sem_unlink()